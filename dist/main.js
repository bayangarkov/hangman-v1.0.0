(()=>{"use strict";const e={category:{animals:["cat","mouse","dog","donkey","horse","crocodile"],cars:["mercedes","vw","audi","bmw"],cities:["knezha","pleven","sofia"]}},t=document.querySelector(".outputWord"),o=document.querySelector(".modal-title"),r=document.querySelector(".modal-body"),a=document.querySelector(".curr-score"),c=document.querySelector(".total-score"),l=document.querySelector(".form-control"),n=document.getElementById("myCanvas"),s=n.getContext("2d");let u=0,d=0,i=[];c.textContent=localStorage.getItem("totalScore"),a.textContent=localStorage.getItem("currScore");let m=0,g=0;$("#myModal").modal({show:!1});class h{createRandomWord(e){return e[Math.floor(Math.random()*e.length)]}outputWordToView(e){return t.innerHTML="",[...e].forEach(((e,o)=>t.insertAdjacentHTML("beforeend",`<div class="tile" data-type="${+o}">?</div>`)))}clearGuesses(){u=0,d=0,i=[]}showStarterHangman(){s.fillRect(70,130,160,10),s.fillRect(70,25,5,110),s.fillRect(70,25,120,5)}clearHangman(){s.clearRect(0,0,n.width,n.height)}updateScore(){m=0,localStorage.setItem("currScore",m),a.textContent=localStorage.getItem("currScore")}hideInputField(){l.setAttribute("readonly","readonly")}showInputField(){l.removeAttribute("readonly")}}class S{checkForEquality(e,t){const o=document.querySelectorAll(".tile");i.includes(t)&&this.alreadyGuessed(),-1===e.search(t)&&(d++,m>=1&&(m-=1),localStorage.setItem("currScore",m),a.textContent=localStorage.getItem("currScore")),[...e].forEach(((e,r)=>{t===e&&(i.includes(t)||(i.push(t),m+=2,u++,localStorage.setItem("currScore",m),a.textContent=localStorage.getItem("currScore")),o[r].textContent=`${e}`)}));let r=e.length;o.forEach((e=>{"?"!==e.textContent&&(r-=1)})),0===r&&this.successModal(),this.createHangman(d)}successModal(){o.textContent="üèÜ Congrats!",r.textContent="You guessed the word! Create another one!",$("#exampleModalCenter").modal("show"),g+=m,localStorage.setItem("totalScore",g),c.textContent=localStorage.getItem("totalScore");const e=new h;e.clearGuesses(),e.updateScore(),e.hideInputField()}alreadyGuessed(){o.textContent="ü§î Oops!",r.textContent="You already guessed that letter!",$("#exampleModalCenter").modal("show")}gameOverMsg(){o.textContent="‚ò† Game Over!",r.textContent="You are dead...You lost your current score!",$("#exampleModalCenter").modal("show"),m=0,a.textContent=m,(new h).hideInputField()}createHangman(e){switch(e){case 1:s.fillRect(190,25,5,25);break;case 2:s.beginPath(),s.arc(192,60,10,0,2*Math.PI),s.stroke();break;case 3:s.fillRect(191,70,2,45);break;case 4:s.fillRect(167,80,25,2);break;case 5:s.fillRect(193,80,25,2);break;case 6:s.fillRect(167,113,25,2);break;case 7:s.fillRect(193,113,25,2);break;default:s.fillRect(70,130,160,10),s.fillRect(70,25,5,110),s.fillRect(70,25,120,5)}7===e&&this.gameOverMsg()}}const f=document.querySelector(".form-select"),y=document.querySelector(".btn-new-game"),C=document.querySelector(".btn-check"),p=document.querySelector(".form-control");document.querySelector(".btn-clear-score").addEventListener("click",(function(e){e.preventDefault(),localStorage.clear(),c.textContent=0,a.textContent=0}));let w=[];y.addEventListener("click",(function(t){t.preventDefault();let o=f.value;const r=new h;if("Select category"===o)return;let a=r.createRandomWord(e.category[o]);console.log(`random word: ${a}`),w.length=0,w.push(a),r.showInputField(),r.clearHangman(),r.outputWordToView(a),r.clearGuesses(),r.updateScore(),r.showStarterHangman()})),C.addEventListener("click",(function(e){if(e.preventDefault(),!w.length)return;let t=p.value.toLowerCase();(new S).checkForEquality(w[0],t),p.value=""}))})();